<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>React</title>
</head>
<body>

<div id="root">
</div>

<script src="./app.js" type="text/javascript" charset="utf-8"></script>
<script>
  liveReloadCode(Date.now(), 300);

  function liveReloadCode(lastUpdate, updateRate) {
    setTimeout(iter, updateRate);

    function iter() {
      var xhr = new XMLHttpRequest();

      xhr.open('GET', '/-/live-reload');
      xhr.onreadystatechange = function() {
        if (xhr.readyState !== 4) {
          return;
        }

        try {
          var change = JSON.parse(xhr.responseText).lastUpdate;

          if (lastUpdate < change) {
            return reload();
          }
        } catch (err) {
        }

        xhr = xhr.onreadystatechange = null;
        setTimeout(iter, updateRate);
      };

      xhr.send(null);
    }
  }

  function reload() {
    window.location.reload();
  }
</script>
</body>
</html>
